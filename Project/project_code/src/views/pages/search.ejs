<%- include ('../partials/header') %> 
<%- include ('../partials/menu') %> 


<body>
  <div class="container mt-4">
    <h1>Google Books Search</h1>

    <!-- Search Form -->
    <form action="/search" method="post" class="mb-3">
      <div class="form-group">
        <label for="query">Query:</label>
        <input type="query" id="search" name="search" class="form-control" required>
      </div>

      <div class="form-group">
        <label for="selectCategory">Search Type</label>
        <select id="selectCategory" name="selectCategory" class="form-control">
          <option value="title" selected>Title</option>
          <option value="author">Author</option>
          <option value="genre">Genre</option>
        </select>
      </div>

      <div class="form-group">
        <label for="numResults">Number of Results</label>
        <select id="numResults" name="numResults" class="form-control">
          <option value="10" selected>10</option>
          <option value="20">20</option>
          <option value="30">30</option>
        </select>
      </div>

      <button type="submit" class="btn btn-primary">Search</button>
    </form>

    <!-- Search Results -->
    <h2>Search Results</h2>

    <div class="row">
      <% if (books.length > 0) { %>
        <% books.forEach(book => { %>
          <div class="col-md-4 mb-3">
            <div class="card">
              <% if (book.volumeInfo.imageLinks) { %>
                <img src="<%= book.volumeInfo.imageLinks.thumbnail %>" class="card-img-top" alt="Cover">
              <% } else { %>
                <p class="m-3">No thumbnail available</p>
              <% } %>
              <div class="card-body">
                <h5 class="card-title"><%= book.volumeInfo.title %></h5>
                <p class="card-text"><%= book.volumeInfo.authors.join(', ') %></p>
              </div>
            </div>
          </div>
        <% }) %>
      <% } else { %>
        <p>No results found.</p>
      <% } %>
    </div>
  </div>
</body>
</html>

<%- include ('../partials/footer') %>
